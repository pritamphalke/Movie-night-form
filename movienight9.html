<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Movie Night Tickets</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <style>
        body {
            background-color: black;
            color: white;
        }

        .container {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            color: black;
            max-width: 650px;
        }

        .form-control {
            background-color: #fff;
            color: #000;
            border: 1px solid #ccc;
        }

        .form-control:focus {
            background-color: #fff;
            color: #000;
            border-color: #007bff;
            box-shadow: none;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
        }

        a {
            color: #007bff;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <h1 class="mb-3">Movie Night Under the Stars ‚ú®</h1>

        <p>
            <strong>OneStop Happening Events</strong> is organizing an Open Air Movie Night üçøüé¨<br /><br />
            <strong>Movie:</strong> Dil Chahta Hai<br />
            <strong>Date:</strong> 10th January 2026<br />
            <strong>Time:</strong> 6:30 PM onwards (Movie starts at 7:00 PM)<br />
            <strong>Venue:</strong> Deshmukh Farms, Chandni Chowk<br />
            <a href="https://maps.app.goo.gl/rqM6kfXs4U4AZaxN6" target="_blank">View on Google Maps</a><br /><br />
            üéÅ <strong>FREE POPCORN with every ticket</strong><br />
            It‚Äôs going to be a cozy evening with a great movie, good vibes, and amazing company. We would love for you to join us! üåô‚ú®
        </p>

        <form
            id="ticketForm"
            action="https://script.google.com/macros/s/AKfycbwPm1Mw03i-hzxWQVHGwOsGEMT0L5TWW9wiVNGGuYuA43RS5i-dcphpzyzvYA6Bx6BQkg/exec"
            method="POST"
            enctype="multipart/form-data"
        >
            <!-- NAME -->
            <div class="mb-3">
                <label class="form-label">Name</label>
                <input type="text" class="form-control" name="name" required />
            </div>

            <!-- MOBILE NUMBER -->
            <div class="mb-3">
                <label class="form-label">Mobile Number</label>
                <input
                    type="tel"
                    class="form-control"
                    name="mobile"
                    placeholder="10-digit mobile number"
                    pattern="[0-9]{10}"
                    required
                />
            </div>

            <!-- EMAIL -->
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" required />
            </div>

            <!-- TICKETS -->
            <div class="mb-3">
                <label class="form-label">Couple Entry (‚Çπ1000 ‚Äì for 2 people)</label>
                <input type="number" class="form-control" name="coupleEntries" id="coupleEntries" min="0" value="0" />
            </div>

            <div class="mb-3">
                <label class="form-label">Stag Entry (‚Çπ650 ‚Äì for 1 person)</label>
                <input type="number" class="form-control" name="stagEntries" id="stagEntries" min="0" value="0" />
            </div>

            <input type="hidden" name="total" id="totalField" />

            <button type="submit" class="btn btn-primary w-100">Generate QR & Proceed to Payment</button>
        </form>

        <div id="confirmation" class="mt-4" style="display:none;">
            <h3 class="text-success">Booking Details</h3>

            <p id="details" class="fw-semibold"></p>

            <div id="qrcode" class="my-3"></div>

            <p class="fw-bold">Scan the QR to pay via UPI</p>
            <p class="text-muted">UPI ID: pritamphalke0595@ybl</p>

            <!-- Payment screenshot upload -->
            <div class="mb-3 mt-3">
                <label for="paymentScreenshot" class="form-label fw-bold">Upload Payment Screenshot</label>
                <input
                    type="file"
                    class="form-control"
                    id="paymentScreenshot"
                    name="paymentScreenshot"
                    accept="image/*"
                    required
                />
                <div id="fileInfo" class="mt-2 text-muted"></div>
            </div>

            <button type="button" id="manualSubmit" class="btn btn-success w-100">Confirm Booking</button>
        </div>
    </div>

    <script>
        document.getElementById('ticketForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const couples = parseInt(document.getElementById('coupleEntries').value) || 0;
            const stags = parseInt(document.getElementById('stagEntries').value) || 0;

            const total = couples * 1000 + stags * 650;

            if (total === 0) {
                alert('Please select at least one ticket');
                return;
            }

            document.getElementById('totalField').value = total;
            document.getElementById('confirmation').style.display = 'block';

            document.getElementById('details').innerText = `Couple Tickets: ${couples}, Stag Tickets: ${stags}, Total Amount: ‚Çπ${total}`;

            document.getElementById('qrcode').innerHTML = '';

            const upiUrl = `upi://pay?pa=pritamphalke0595@ybl&pn=Pritam%20Phalke&am=${total}&cu=INR`;

            new QRCode(document.getElementById('qrcode'), {
                text: upiUrl,
                width: 160,
                height: 160,
            });
        });

        document.getElementById('manualSubmit').addEventListener('click', function () {
            const fileInput = document.getElementById('paymentScreenshot');
            if (!fileInput.files.length) {
                alert('Please upload the payment screenshot before confirming.');
                fileInput.focus();
                return;
            }
            document.getElementById('ticketForm').submit();
        });

        document.getElementById('paymentScreenshot').addEventListener('change', function () {
            const fileInfo = document.getElementById('fileInfo');
            if (this.files.length > 0) {
                fileInfo.textContent = `Selected file: ${this.files[0].name}`;
            } else {
                fileInfo.textContent = '';
            }
        });
    </script>
</body>
</html>
